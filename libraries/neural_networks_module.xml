<blocks app="Snap! 11-250612-dev, https://snap.berkeley.edu" version="2"><palette><category name="Neural Networks" color="161,163,0,1"/></palette><block-definition s="plot bars %&apos;data&apos; fill %&apos;width&apos; center %&apos;switch&apos; clear %&apos;clear&apos;" type="command" category="pen"><comment x="0" y="0" w="120" collapsed="false">draw a list of numbers as  vertical lines distributed evenly across the stage.</comment><header></header><code></code><translations>de:male Balken _ gef√ºllt _ zentriert _ wische _&#xD;</translations><inputs><input type="%l"></input><input type="%n">0.8<options>single=0.8&#xD;pan=1&#xD;overlap=1.2</options></input><input type="%b">false</input><input type="%b" initial="1">true</input></inputs><script><block s="doIf"><block var="clear"/><script><block s="clear"></block></script><list></list></block><block s="doDeclareVariables"><list><l>slice</l><l>pos</l><l>pen size</l></list></block><block s="doSetVar"><l>pos</l><block s="getPosition"></block></block><block s="doSetVar"><l>slice</l><block s="reportQuotient"><block s="reportAttributeOf"><l><option>width</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block s="reportListAttribute"><l><option>length</option></l><block var="data"/></block></block></block><block s="doSetVar"><l>pen size</l><block s="getPenAttribute"><l><option>size</option></l></block></block><block s="setSize"><block s="reportVariadicProduct"><list><block var="slice"/><block var="width"/></list></block></block><block s="setXPosition"><block s="reportVariadicSum"><list><block s="reportAttributeOf"><l><option>left</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block s="reportQuotient"><block var="slice"/><l>2</l></block></list></block></block><block s="doWarp"><script><block s="doForEach"><l>item</l><block var="data"/><script><block s="doIf"><block s="reportVariadicNotEquals"><list><block var="item"/><l>0</l></list></block><script><block s="setYPosition"><block s="reportIfElse"><block var="switch"/><block s="reportQuotient"><block var="item"/><l>-2</l></block><block s="reportAttributeOf"><l><option>bottom</option></l><block s="reportGet"><l><option>stage</option></l></block></block></block></block><block s="down"></block><block s="changeYPosition"><block var="item"/></block><block s="up"></block></script><list></list></block><block s="changeXPosition"><block var="slice"/></block></script></block></script></block><block s="doGotoObject"><block var="pos"/></block><block s="setSize"><block var="pen size"/></block></script></block-definition><block-definition s="object %&apos;fields&apos;" type="reporter" category="lists"><header></header><code></code><translations>de:Objekt _&#xD;</translations><inputs><input type="%group%t%s" irreplaceable="true" expand="$nl&#xD;:" initial="2" min="2">$_field&#xD;$_thing</input></inputs><script><block s="doDeclareVariables"><list><l>data</l></list></block><block s="doSetVar"><l>data</l><block s="reportNewList"><list></list></block></block><block s="doWarp"><script><block s="doForEach"><l>assoc</l><block var="fields"/><script><block s="doReplaceInList"><block s="reportListItem"><l>1</l><block var="assoc"/></block><block var="data"/><block s="reportListItem"><l>2</l><block var="assoc"/></block></block><block s="doTellTo"><block s="reportEnvironment"><l><option>caller</option></l></block><block s="reifyScript"><script><block s="doSetVar"><l></l><l></l></block></script><list></list></block><list><block s="reportListItem"><l>1</l><block var="assoc"/></block><block s="reportListItem"><block s="reportListItem"><l>1</l><block var="assoc"/></block><block var="data"/></block></list></block></script></block></script></block><block s="doReport"><block var="data"/></block></script></block-definition><block-definition s="clone %&apos;parent&apos; %&apos;fields&apos;" type="reporter" category="lists"><header></header><code></code><translations>de:klone _ _&#xD;</translations><inputs><input type="%l" initial="1"></input><input type="%group%upvar%s" irreplaceable="true" expand="$nl&#xD;:">$_field&#xD;$_thing</input></inputs><script><block s="doDeclareVariables"><list><l>data</l></list></block><block s="doSetVar"><l>data</l><custom-block s="object %group%t%s"><list><l>...</l><block var="parent"/></list></custom-block></block><block s="doIf"><block s="reportNot"><block s="reportListIsEmpty"><block var="fields"/></block></block><script><block s="doWarp"><script><block s="doForEach"><l>assoc</l><block var="fields"/><script><block s="doReplaceInList"><block s="reportListItem"><l>1</l><block var="assoc"/></block><block var="data"/><block s="reportListItem"><l>2</l><block var="assoc"/></block></block><block s="doTellTo"><block s="reportEnvironment"><l><option>caller</option></l></block><block s="reifyScript"><script><block s="doSetVar"><l></l><l></l></block></script><list></list></block><list><block s="reportListItem"><l>1</l><block var="assoc"/></block><block s="reportListItem"><block s="reportListItem"><l>1</l><block var="assoc"/></block><block var="data"/></block></list></block></script></block></script></block></script><list></list></block><block s="doReport"><block var="data"/></block></script></block-definition><block-definition s="initialize neural networks" type="command" category="Neural Networks" helper="true"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="_Layer_"/><l><option>list</option></l></block></block><script><block s="doSetVar"><l>_Layer_</l><custom-block s="object %group%t%s"><list><l>inputs</l><l>thing</l><l>weights</l><l>thing</l><l>setup</l><block s="reifyReporter"><script><block s="doSetVar"><l>weights</l><block s="reportRandom"><l>-1.0</l><block s="reportReshape"><l>1</l><list><block var="out"/><block s="reportVariadicSum"><list><block var="in"/><l>1</l></list></block></list></block></block></block><block s="doReport"><block s="reportEnvironment"><l><option>object</option></l></block></block></script><list><l>in</l><l>out</l></list></block><l>solve</l><block s="reifyReporter"><script><block s="doSetVar"><l>inputs</l><block var="sample"/></block><block s="doReport"><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportMonadic"><l><option>sigmoid</option></l><block s="reportVariadicSum"><block s="reportVariadicProduct"><list><block s="reportCONS"><l>1</l><block var="inputs"/></block><l></l></list></block></block></block></autolambda><list></list></block><block var="weights"/></block></block></script><list><l>sample</l></list></block><l>learn</l><block s="reifyReporter"><script><block s="doSetVar"><l>delta</l><block var="error"/></block><block s="doReport"><block s="reportVariadicSum"><block s="reportVariadicProduct"><list><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportVariadicProduct"><list><block var="inputs"/><block s="reportDifference"><l>1</l><block var="inputs"/></block><l></l></list></block></autolambda><list></list></block><block var="error"/></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportCDR"><l/></block></autolambda><list></list></block><block var="weights"/></block></list></block></block></block></script><list><l>error</l></list></block><l>reshuffle</l><block s="reifyReporter"><script><block s="doChangeVar"><l>weights</l><block s="reportMonadic"><l><option>neg</option></l><block var="weights"/></block></block><block s="doChangeVar"><l>weights</l><block s="reportRandom"><l>-1.0</l><block s="reportReshape"><l>1</l><block s="reportListAttribute"><l><option>dimensions</option></l><block var="weights"/></block></block></block></block></script><list></list></block><l>delta</l><l>thing</l><l>adjust weights</l><block s="reifyReporter"><script><block s="doChangeVar"><l>weights</l><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportVariadicProduct"><list><block s="reportCONS"><l>1</l><block var="inputs"/></block><block var="learning rate"/><l></l></list></block></autolambda><list></list></block><block var="delta"/></block></block></script><list></list></block><l>learning rate</l><l>0.1</l></list></custom-block></block></script><list></list></block><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="_Neural Network_"/><l><option>list</option></l></block></block><script><block s="doSetVar"><l>_Neural Network_</l><custom-block s="object %group%t%s"><list><l>layers</l><l>thing</l><l>get learning rate</l><block s="reifyReporter"><autolambda><block s="reportListItem"><l>learning rate</l><block s="reportListItem"><l>1</l><block var="layers"/></block></block></autolambda><list></list></block><l>setup</l><block s="reifyReporter"><script><block s="doSetVar"><l>layers</l><block s="reportNewList"><list></list></block></block><block s="doFor"><l>i</l><l>1</l><block s="reportDifference"><block s="reportListAttribute"><l><option>length</option></l><block var="topology"/></block><l>1</l></block><script><block s="doAddToList"><block s="evaluate"><block s="reportListItem"><l>setup</l><custom-block s="clone %l %group%upvar%s"><block var="_Layer_"/><list></list></custom-block></block><block s="reportListItem"><block s="reportNewList"><list><block var="i"/><block s="reportVariadicSum"><list><block var="i"/><l>1</l></list></block></list></block><block var="topology"/></block></block><block var="layers"/></block></script></block><block s="doReport"><block s="reportEnvironment"><l><option>object</option></l></block></block></script><list><l>topology</l></list></block><l>set learning rate</l><block s="reifyReporter"><script><block s="doIf"><block s="reportVariadicNotEquals"><list><block var="alpha"/><l>01</l></list></block><script><block s="doForEach"><l>layer</l><block var="layers"/><script><block s="doReplaceInList"><l>learning rate</l><block var="layer"/><block var="alpha"/></block></script></block></script><list></list></block></script><list><l>alpha</l></list></block><l>predict</l><block s="reifyReporter"><script><block s="doDeclareVariables"><list><l>outputs</l></list></block><block s="doSetVar"><l>outputs</l><block var="sample"/></block><block s="doFor"><l>i</l><l>1</l><block s="reportListAttribute"><l><option>length</option></l><block var="layers"/></block><script><block s="doSetVar"><l>outputs</l><block s="evaluate"><block s="reportListItem"><l>solve</l><block s="reportListItem"><block var="i"/><block var="layers"/></block></block><list><block var="outputs"/></list></block></block></script></block><block s="doReport"><block var="outputs"/></block></script><list><l>sample</l></list></block><l>classify</l><block s="reifyReporter"><autolambda><block s="reportRound"><block s="evaluate"><block var="predict"/><list><block var="sample"/></list></block></block></autolambda><list><l>sample</l></list></block><l>fit</l><block s="reifyReporter"><script><block s="doDeclareVariables"><list><l>error</l><l>delta</l></list></block><block s="doSetVar"><l>error</l><block s="reportDifference"><block s="reportListItem"><l><option>last</option></l><block var="sample"/></block><block s="evaluate"><block var="predict"/><list><block var="sample"/></list></block></block></block><block s="doSetVar"><l>delta</l><block var="error"/></block><block s="doFor"><l>i</l><block s="reportListAttribute"><l><option>length</option></l><block var="layers"/></block><l>1</l><script><block s="doSetVar"><l>delta</l><block s="evaluate"><block s="reportListItem"><l>learn</l><block s="reportListItem"><block var="i"/><block var="layers"/></block></block><list><block var="delta"/></list></block></block></script></block><block s="doForEach"><l>layer</l><block var="layers"/><script><block s="doRun"><block s="reportListItem"><l>adjust weights</l><block var="layer"/></block><list></list></block></script></block><block s="doReport"><block s="reportVariadicSum"><block s="reportMonadic"><l><option>abs</option></l><block var="error"/></block></block></block></script><list><l>sample</l></list></block><l>train</l><block s="reifyReporter"><script><block s="doDeclareVariables"><list><l>errors</l></list></block><block s="doForEach"><l>sample</l><block s="reportListAttribute"><l><option>shuffled</option></l><block var="set"/></block><script><block s="doChangeVar"><l>errors</l><block s="evaluate"><block var="fit"/><list><block var="sample"/></list></block></block></script></block><block s="doReport"><block var="errors"/></block></script><list><l>set</l></list></block><l>validate</l><block s="reifyReporter"><script><block s="doDeclareVariables"><list><l>hits</l><l>target</l></list></block><block s="doForEach"><l>sample</l><block var="set"/><script><block s="doIf"><block s="reportVariadicEquals"><list><block s="reportVariadicSum"><block s="evaluate"><block var="classify"/><list><block var="sample"/></list></block></block><block s="reportListItem"><l><option>last</option></l><block var="sample"/></block></list></block><script><block s="doChangeVar"><l>hits</l><l>1</l></block></script><list></list></block></script></block><block s="doReport"><block s="reportQuotient"><block var="hits"/><block s="reportListAttribute"><l><option>length</option></l><block var="set"/></block></block></block></script><list><l>set</l></list></block><l>get model</l><block s="reifyReporter"><autolambda><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>weights</l><l/></block></autolambda><list></list></block><block var="layers"/></block></autolambda><list></list></block><l>set model</l><block s="reifyReporter"><script><block s="doDeclareVariables"><list><l>layer</l></list></block><block s="doSetVar"><l>layers</l><block s="reportNewList"><list></list></block></block><block s="doForEach"><l>vector</l><block var="model"/><script><block s="doSetVar"><l>layer</l><custom-block s="clone %l %group%upvar%s"><block var="_Layer_"/><list></list></custom-block></block><block s="doReplaceInList"><l>weights</l><block var="layer"/><block var="vector"/></block><block s="doAddToList"><block var="layer"/><block var="layers"/></block></script></block></script><list><l>model</l></list></block><l>shuffle</l><block s="reifyReporter"><script><block s="doForEach"><l>layer</l><block var="layers"/><script><block s="doRun"><block s="reportListItem"><l>reshuffle</l><block var="layer"/></block><list></list></block></script></block></script><list></list></block><l>get topology</l><block s="reifyReporter"><autolambda><block s="reportCONS"><block s="reportDifference"><block s="reportListItem"><l>2</l><block s="reportListAttribute"><l><option>dimensions</option></l><block s="reportListItem"><l>weights</l><block s="reportListItem"><l>1</l><block var="layers"/></block></block></block></block><l>1</l></block><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportListItem"><l>1</l><block s="reportListAttribute"><l><option>dimensions</option></l><block s="reportListItem"><l>weights</l><l/></block></block></block></autolambda><list></list></block><block var="layers"/></block></block></autolambda><list></list></block></list></custom-block></block></script><list></list></block></script></block-definition><block-definition s="new neural network %&apos;configuration&apos;" type="reporter" category="Neural Networks"><comment w="214" collapsed="false">Create and report a new neural network with the specified topology representing the number of inputs, arbitrary hidden layers, and output(s).</comment><header></header><code></code><translations></translations><inputs><input type="%mult%n" initial="2" min="2">5&#xD;1</input></inputs><script><custom-block s="initialize neural networks"></custom-block><block s="doReport"><block s="evaluate"><block s="reportListItem"><l>setup</l><custom-block s="clone %l %group%upvar%s"><block var="_Neural Network_"/><list></list></custom-block></block><list><block var="configuration"/></list></block></block></script></block-definition><block-definition s="classify %&apos;sample&apos; with network %&apos;network&apos;" type="reporter" category="Neural Networks"><comment w="209" collapsed="false">Predict and report the classification of a given data sample - a list of numbers representing a single record in a dataset - using the specified neural network instance. The result is a list of numbers representing the neural network&apos;s output layer.</comment><header></header><code></code><translations></translations><inputs><input type="%l" readonly="true" initial="1"></input><input type="%s" readonly="true" initial="1"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportListItem"><l>classify</l><block var="network"/></block><list><block var="sample"/></list></block></block></script></block-definition><block-definition s="%&apos;selector&apos; network %&apos;network&apos; on %&apos;dataset&apos;" type="reporter" category="Neural Networks"><comment w="239" collapsed="false">Train a single epoch or validate a neural model on a truth-table dataset (a list of number-vectors with the expected classification in the last column).&#xD;&#xD;For &quot;train&quot; this reports the accumulated activation error over the epoch.&#xD;&#xD;For &quot;validate&quot; this reports the overall classification accuracy of the dataset.</comment><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true" irreplaceable="true" initial="1">train<options>train&#xD;validate</options></input><input type="%s" readonly="true" initial="1"></input><input type="%l" initial="1"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportListItem"><block var="selector"/><block var="network"/></block><list><block var="dataset"/></list></block></block></script></block-definition><block-definition s="%&apos;selector&apos; of network %&apos;network&apos;" type="reporter" category="Neural Networks" space="true"><comment w="182" collapsed="false">Query the model or the learning rate of a given neural network.&#xD;&#xD;For &quot;model&quot; this reports a list of weight-matrices representing the neural network&apos;s hidden and output layers. Models can be exported and shared among projects.&#xD;&#xD;For &quot;learning rate&quot; this reports a single number representing the neural network&apos;s eagerness to adjust its weights when learning.</comment><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true" irreplaceable="true" initial="1">get model<options>get model&#xD;get learning rate&#xD;get topology</options></input><input type="%s" readonly="true" initial="1"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportListItem"><block var="selector"/><block var="network"/></block><list></list></block></block></script></block-definition><block-definition s="render neural model %&apos;model&apos; %&apos;options&apos;" type="command" category="pen"><comment w="216" collapsed="false">Draw a picture of the specified model of a neural network where each layer is represented as a vertical line of dots and each weight as a line between 2 neuron-dots. The line width represents the weight&apos;s overall value.</comment><header></header><code></code><translations></translations><inputs><input type="%l" initial="1"></input><input type="%mult%n" irreplaceable="true" expand="factor&#xD;shift y&#xD;clear" max="2">1&#xD;0&#xD;1</input></inputs><script><block s="doDeclareVariables"><list><l>topology</l><l>x-spacing</l><l>y-spacings</l><l>x</l><l>y</l><l>weights</l><l>w</l><l>min</l><l>dot</l><l>shift-y</l><l>factor</l></list></block><block s="clear"></block><block s="doSetVar"><l>factor</l><block s="reportIfElse"><block s="reportListIsEmpty"><block var="options"/></block><l>1</l><block s="reportListItem"><l>1</l><block var="options"/></block></block></block><block s="doSetVar"><l>shift-y</l><block s="reportListItem"><l>2</l><block var="options"/></block></block><block s="doSetVar"><l>min</l><block s="reportVariadicMin"><block s="reportVariadicMin"><block s="reportVariadicMin"><block var="model"/></block></block></block></block><block s="doSetVar"><l>topology</l><block s="reportConcatenatedLists"><list><block s="reportMap"><block s="reifyReporter"><autolambda><block s="reportListAttribute"><l><option>length</option></l><block s="reportListAttribute"><l><option>columns</option></l><l/></block></block></autolambda><list></list></block><block var="model"/></block><block s="reportNewList"><list><block s="reportListAttribute"><l><option>length</option></l><block s="reportListItem"><l><option>last</option></l><block var="model"/></block></block></list></block></list></block></block><block s="doSetVar"><l>x</l><block s="reportAttributeOf"><l><option>left</option></l><block s="reportGet"><l><option>stage</option></l></block></block></block><block s="doSetVar"><l>x-spacing</l><block s="reportQuotient"><block s="reportAttributeOf"><l><option>width</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block s="reportVariadicSum"><list><block s="reportListAttribute"><l><option>length</option></l><block var="topology"/></block><l>1</l></list></block></block></block><block s="doSetVar"><l>y-spacings</l><block s="reportQuotient"><block s="reportAttributeOf"><l><option>height</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block s="reportVariadicSum"><list><block var="topology"/><l>1</l></list></block></block></block><block s="doSetVar"><l>dot</l><block s="reportVariadicProduct"><list><block s="reportVariadicMin"><list><block s="reportVariadicMin"><block var="y-spacings"/></block><block var="x-spacing"/></list></block><l>0.5</l></list></block></block><block s="doWarp"><script><block s="doFor"><l>i</l><l>1</l><block s="reportDifference"><block s="reportListAttribute"><l><option>length</option></l><block var="topology"/></block><l>1</l></block><script><block s="doChangeVar"><l>x</l><block var="x-spacing"/></block><block s="doSetVar"><l>y</l><block s="reportVariadicSum"><list><block s="reportAttributeOf"><l><option>bottom</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block var="shift-y"/></list></block></block><block s="doSetVar"><l>weights</l><block s="reportListItem"><block var="i"/><block var="model"/></block></block><block s="doFor"><l>k</l><l>1</l><block s="reportListItem"><block var="i"/><block var="topology"/></block><script><block s="doChangeVar"><l>y</l><block s="reportListItem"><block var="i"/><block var="y-spacings"/></block></block><block s="doFor"><l>m</l><block s="reportIfElse"><block s="reportVariadicLessThan"><list><block var="i"/><block s="reportDifference"><block s="reportListAttribute"><l><option>length</option></l><block var="topology"/></block><l>1</l></block></list></block><l>2</l><l>1</l></block><block s="reportListItem"><block s="reportVariadicSum"><list><block var="i"/><l>1</l></list></block><block var="topology"/></block><script><block s="gotoXY"><block var="x"/><block var="y"/></block><block s="down"></block><block s="setSize"><block var="dot"/></block><block s="forward"><l>0</l></block><block s="doSetVar"><l>w</l><block s="reportDifference"><block s="reportListItem"><block var="m"/><block s="reportListItem"><block var="k"/><block s="reportListAttribute"><l><option>columns</option></l><block var="weights"/></block></block></block><block var="min"/></block></block><block s="setSize"><block s="reportVariadicProduct"><list><block var="w"/><block var="factor"/></list></block></block><block s="gotoXY"><block s="reportVariadicSum"><list><block var="x"/><block var="x-spacing"/></list></block><block s="reportVariadicSum"><list><block s="reportAttributeOf"><l><option>bottom</option></l><block s="reportGet"><l><option>stage</option></l></block></block><block s="reportVariadicProduct"><list><block var="m"/><block s="reportListItem"><block s="reportVariadicSum"><list><block var="i"/><l>1</l></list></block><block var="y-spacings"/></block></list></block><block var="shift-y"/></list></block></block><block s="setSize"><block var="dot"/></block><block s="forward"><l>0</l></block><block s="up"></block></script></block></script></block></script></block></script></block></script></block-definition><block-definition s="%&apos;selector&apos; of network %&apos;network&apos; to %&apos;data&apos;" type="command" category="Neural Networks"><comment w="131.0000000000001" collapsed="false">Assign a pre-trained model to the given neural network or change its learning rate.</comment><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true" irreplaceable="true" initial="1">set model<options>set model&#xD;set learning rate</options></input><input type="%s" readonly="true" initial="1"></input><input type="%n" initial="1"></input></inputs><script><block s="doRun"><block s="reportListItem"><block var="selector"/><block var="network"/></block><list><block var="data"/></list></block></script></block-definition><variables><variable name="_Neural Network_" hidden="true"><l></l></variable><variable name="_Layer_" hidden="true"><l></l></variable></variables></blocks>